<section class="product-list">
  <header class="product-list__header">
    <div>
      <p class="eyebrow">Stock details</p>
      <h2>Products</h2>
      <p class="sub">Select a product to edit details, upload images, and add SKUs.</p>
    </div>
    <button class="primary-btn" type="button" (click)="openAddProduct()">Add product</button>
  </header>

  <div class="product-list__body" *ngIf="products$ | async as products">
    <div class="state" *ngIf="loading">Loading products...</div>
    <div class="state error" *ngIf="!loading && error">{{ error }}</div>

    <div class="empty" *ngIf="!loading && !error && !products.length">
      <p>No products yet.</p>
      <button class="ghost-btn" type="button" (click)="openAddProduct()">Create your first product</button>
    </div>

    <div class="table-wrap" *ngIf="products.length">
      <table class="product-table">
        <thead>
          <tr>
            <th>Image</th>
            <th>Product</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products" (click)="openEditProduct(product)">
            <td class="image-cell">
              <div class="image-preview" [class.empty]="!product.productImage">
                <img *ngIf="product.productImage" [src]="resolveImage(product.productImage)" alt="{{ product.productName }}" />
                <span *ngIf="!product.productImage">No image</span>
              </div>
            </td>
            <td>
              <div class="name">
                <div class="title">{{ product.productName }}</div>
                <div class="meta">ID: {{ product.id }}</div>
              </div>
            </td>
            <td>{{ product.description || 'No description provided.' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
